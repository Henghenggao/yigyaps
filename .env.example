# ─────────────────────────────────────────────────────────────────────────────
# YigYaps Environment Variables
# Copy this file to .env and fill in the values for your environment.
# ─────────────────────────────────────────────────────────────────────────────

# ── Environment ───────────────────────────────────────────────────────────────
# Set to "development" for local dev, "production" for deployment
NODE_ENV=development

# ── Database ──────────────────────────────────────────────────────────────────
# PostgreSQL connection string (Railway auto-injects this)
DATABASE_URL=postgresql://user:password@host:5432/dbname

# ── Server ────────────────────────────────────────────────────────────────────
# Port for the API server (Railway sets this automatically)
PORT=3100

# Host binding (use 0.0.0.0 for Railway/Docker)
HOST=0.0.0.0

# Public API URL (used in MCP registry discovery)
YIGYAPS_API_URL=https://api.yigyaps.com

# ── Security ──────────────────────────────────────────────────────────────────
# CORS allowed origins (comma-separated or "*" for all)
CORS_ORIGIN=https://yigyaps.com,http://localhost:5173

# KMS Master Key Encryption Key (64 hex characters = 32 bytes) for AES-256-GCM envelope encryption
# PRODUCTION: Required (server will crash on startup if not set)
# DEVELOPMENT: Optional (uses random key with warning, data not persisted across restarts)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
KMS_KEK=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# ── Logging ───────────────────────────────────────────────────────────────────
# Log level: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# ── Phase 2: GitHub OAuth & JWT Authentication ───────────────────────────────
# GitHub OAuth credentials (create at https://github.com/settings/developers)
GITHUB_CLIENT_ID=your_github_oauth_app_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_app_client_secret
GITHUB_CALLBACK_URL=https://api.yigyaps.com/v1/auth/github/callback

# JWT signing secret (generate with: openssl rand -base64 32)
JWT_SECRET=your_secure_random_string_minimum_32_characters

# Session secret (generate with: openssl rand -base64 32)
SESSION_SECRET=your_secure_random_string_minimum_32_characters

# Frontend URL for OAuth redirects
FRONTEND_URL=https://yigyaps.com

# ── Web Frontend (apps/web) ───────────────────────────────────────────────────
# API base URL consumed by the React frontend (set as Vite build arg)
# For local development: http://localhost:3100
# For production: https://api.yigyaps.com
VITE_API_URL=http://localhost:3100

# ── Phase 3: Stripe Payments ─────────────────────────────────────────────────
# Stripe secret key (create at https://dashboard.stripe.com/apikeys)
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key

# Stripe webhook signing secret (create at https://dashboard.stripe.com/webhooks)
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_signing_secret

# Stripe Connect client ID for expert onboarding (https://dashboard.stripe.com/settings/connect)
STRIPE_CONNECT_CLIENT_ID=ca_your_connect_client_id

# ── IP Timestamp Evidence (optional) ─────────────────────────────────────────
# GitHub repo for IP evidence commits (format: "owner/repo")
# GITHUB_EVIDENCE_REPO=yigyaps/evidence
# GitHub PAT with contents:write scope on the evidence repo
# GITHUB_EVIDENCE_TOKEN=ghp_your_personal_access_token
